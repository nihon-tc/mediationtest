def loc=this.getClass().getProtectionDomain().getCodeSource().getLocation()println "===start($loc)==="def prop1 = new Properties()prop1.load(new FileInputStream('local.properties'))def config = new ConfigSlurper().parse(prop1)def adb_home="${config.sdk.dir}//platform-tools"def apkName= "${config.release.app.name}_${config.release.app.version}.apk"println apkNamedef manifestXml = new XmlSlurper().parse(new File("AndroidManifest.xml"))//println manifestXml.dump()pkgName = manifestXml.@package.text()println pkgNamecmd = "${adb_home}/adb devices"println cmddef proc = cmd.execute()proc.waitFor()def deviceList = []def txt =proc.in.textprintln txttxt.split('\n').each{it->	if(""== it.trim() || it=~/List*/ )return;//same continure	device = it.split('\t')[0]	println device	deviceList.add device}println deviceList.dump()deviceList.each{it->	cmd = "${adb_home}/adb -s $it uninstall $pkgName"	proc = cmd.execute()	proc.waitFor()	println "[$cmd]<${proc.exitValue()}>=${proc.in.text}"		cmd = "${adb_home}/adb -s $it install $apkName"	proc = cmd.execute()	proc.waitFor()	println "[$cmd]<${proc.exitValue()}>=${proc.in.text}"}println "===end($loc)==="