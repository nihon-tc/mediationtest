package com.nihon0tc.ad;import mediba.ad.sdk.android.openx.MasAdView;import proguard.annotation.Keep;import proguard.annotation.KeepName;import android.app.Activity;import android.view.LayoutInflater;import android.view.ViewGroup;import com.nihon0tc.ad.R;import com.google.ads.AdSize;import com.google.ads.mediation.MediationAdRequest;import com.google.ads.mediation.customevent.CustomEventBannerListener;import com.nihon0tc.util.LogUtil;@Keeppublic class MedibaMasAd extends CustomAd {	private static ViewGroup adParentView;	private static MasAdView adView = null;	@KeepName	@Override	public void requestBannerAd(CustomEventBannerListener listener,			Activity activity, String label, String serverParameter,			AdSize adSize, MediationAdRequest request,			Object customEventExtra) {		super.requestBannerAd(listener, activity, label, serverParameter, adSize,request,customEventExtra);		LogUtil.trace(TAG,String.format("(label,serverParameter,customEventExtra)=(%s,%s,%s)",label,serverParameter,customEventExtra));		if(adView!=null){			onRecivedAd(listener);	 	   	return;		}		String Auid ="";		if(serverParameter==null || "".equals(serverParameter.trim()) ){			Auid = activity.getResources().getString(R.string.Auid);		}		else{			Auid = serverParameter;		}		KeyInfo = Auid;    	try {    		if(adView==null){        		LayoutInflater inflater = activity.getLayoutInflater();        		adParentView  = (ViewGroup)inflater.inflate(R.layout.ad_medibamasad, null);        		adView = (MasAdView)adParentView.findViewById(R.id.Mediba_mas_adview);        		adView.setAuid(Auid);    		}                		adView.start();// 広告取得開始    		sendStatus(true);		} catch (Exception e) {			LogUtil.error(TAG,"init",e);			listener.onFailedToReceiveAd();    		sendStatus(false);			return;		}    	onRecivedAd(listener);   }	private void onRecivedAd(CustomEventBannerListener listener) {		try {			listener.onReceivedAd(adParentView);		   	LogUtil.trace(TAG,"onReceivedAd OK");    		sendStatus(true);		 } catch (Exception e) {			LogUtil.error(TAG,"onReceivedAd",e);			listener.onFailedToReceiveAd();    		sendStatus(false);		}	}		@KeepName	@Override	public void stop() {	   	LogUtil.trace(TAG,"support stop");		try {			if(adView!=null)adView.stop();		} catch (Exception e) {			LogUtil.error(TAG,"stop",e);		}	}	@KeepName	@Override	public void start() {	   	LogUtil.trace(TAG,"support start");		try {			if(adView!=null)adView.start();		} catch (Exception e) {			LogUtil.error(TAG,"start",e);		}	}}
